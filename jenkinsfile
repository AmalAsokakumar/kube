pipeline{ 
    agent any
    tools {
        maven 'my-mvn'
    }
    stages{
        stage('fetching code'){
            steps {
               // git branch:'devops', credentialsId: 'git-cred', url:'https://github.com/comrider/kube.git'
                echo 'cloninig git repository'
            }
        }
        stage('archieving the files '){
            steps{
                  // not considering these now .....
                  //echo "building the dockerimage..."
                  //sh 'docker build -t comrider/nginx_file .'
                  sh 'tar -czvf  myapp-${BUILD_NUMBER}.tgz *'
            }
        }
        stage('pushing the file to git hub'){
            steps{
                echo"pushing the artifact to git hub"
                sshagent (credentials: ['git-token']) {
                    // "git add", "git commit", and "git push" your changes here. You may have to cd into the repo directory like I did here because the current working directory is the parent directory to the directory that contains the actual repo, created by "git clone" earlier in this Jenkinsfile.
                    sh("(git add *.tgz)")
                    sh("(git commit -m 'file added ')")
                    sh('(git push git@github.com:comrider/DevOps.git)')
                }
            }
        }
    }
}